## 7장 함께 모으기

개념 관점 : 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현. 실제 도메인의 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심.

명세 관점 : 도메인을 벗어나 소프트웨어(객체들의 책임)로 초점 변경. 객체가 '무엇'을 할 수 있는가에 초점을 맞춘다. "구현이 아니라 인터페이스에 대해 프로그래밍하라[GOF 1994]"를 따르는 것은 명세 관점과 구현 관점을 명확하게 분리하는 것에서부터 시작된다.

구현 관점 : 실제 코드와 가장 연관이 깊은 관점. 객체가 책임을 '어떻게' 수행할 것인가에 초점을 맞춘다.

개념, 명세, 구현 관점의 순서대로 소프트웨어를 개발하는 것이 아니다. 이것은 동일한 클래스를 세가지 다른 방향에서 바라보는 것을 의미한다.

클래스는 세 가지 관점을 모두 수용할 수 있도록 개념, 인터페이스, 구현을 함께 드러내야 한다.

---

### 1. 도메인 모델 과정

1. 도메인을 구성하는 객체들에 대해 고민해보기.

2. 객체들간의 관계를 식별하기.

3. 동적인 객체를 정적인 타입으로 변환하기.

4. 타입간의 어떤 관계가 있는지 알아보기.

도메인 모델의 초첨은 타입들 사이에 어떤 관계가 존재하는지를 파악함으로써 도메인을 이해하는 것이다.

### 2. 설계하고 구현하기

1. 메시지를 먼저 선택하고 수신할 객체를 선택하기.

2. 위에서 만든 도메인 모델 안에서 적절한 타입을 발견하고 객체를 그 타입의 인스턴스로 만든다.

3. 기능을 수행하기 위해 필요한 메시지를 계속 식별하고 어떤 객체가 적합한지 찾는다.(전 장에서 언급해왔듯이 모든 객체를 자율적으로 능동적인 존재라고 생각하기.)

### 3. 인터페이스 정리하기

1. 각 객체의 수신 가능한 메시지들이 그 객체의 인터페이스다.

2. 식별된 오퍼레이션들을 타입의 인터페이스에 추가한다.

3. 협력을 통해 식별된 타입의 오퍼레이션은 외부에서 접근 가능하다.

4. 협력을 구상하는 단계에 너무 시간을 쓰지 말고 코드를 통한 피드백으로 구현 가능한지 판단해야 한다.

5. 코드를 통한 구현 과정에서 여러가지 변경이 가해질 수 있으므로 인터페이스를 정하는 단계에서는 객체의 속성과 그 속성의 자료 구조를 고려하지 않는것이 좋다.

6. 인터페이스를 통해 실제로 상호작용을 해봐야 그 정확한 모습을 예측할 수 있다.

### 4. 코드와 세 가지 관점.

1. 소프트웨어와 도메인 사이의 간격이 좁으면 좁을수록 기능을 변경하기 위해 분석해야 하는 코드의 양도 줄어든다.(개념 관점)

2. 인터페이스의 수정은 해당 객체와 협력 관계에 있는 모든 객체들에게 영향을 미치므로 변경하기가 힘들다. 최대한 변환에 안정적인 인터페이스를 만들기 위해서는 인터페이스를 통해 구현과 관련된 세부 사항이 드러나지 않게 해야 한다.(명세 관점)

3. 클래스의 메서드와 속성은 공용 인터페이스의 일부가 아니므로 메서드와 속성의 변경이 원칙적으로 외부의 객체에게 영향을 미쳐서는 안 된다.

4. 도메인 개념 안에서 적절한 객체를 선택하는 것은 도메인 지식으로 코드의 구조와 의미를 유추할 수 있게 도와준다. 이것은 유지보수성에 좋은 영향을 미친다.

5. 클래스가 도메인 개념을 따르고 여러 개의 클래스로 기능을 분할하고 인터페이스와 구현을 분리하면 변경이 발생했을 때 코드 변경이 좀 더 쉬울 수도 있다.

6. 인터페이스와 구현을 분리하자. 명세 관점은 클래스의 안정적인 측면, 구현 관점은 클래스의 불안정한 측면을 드러내게 하자. 실제로 훌륭한 설계를 결정하는 측면은 명세 관점인 인터페이스다. 명세 관점이 설계를 주도하게 하면 설계의 품질이 향상될 수 있다.

7. 위 세 가지 관점에서 클래스를 바라볼 수 있으려면 훌륭한 설계가 뒷받침되어야 한다.